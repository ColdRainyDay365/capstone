<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Change Request Interface</title>
    <link rel="stylesheet" href="static/src/css/change_request.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Additional styles for preview */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .preview-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .col-md-6 {
            flex: 1;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .modern-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: white;
            border-bottom: 1px solid #e1e5e9;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
        }
        
        .status-display {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideInRight 0.3s ease;
        }
        
        .notification-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
        }
        
        .notification-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .auto-save-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="change-request-modern">
        <div class="change-request-card">
            <!-- Header -->
            <div class="change-request-header">
                <h1>Change Request Management</h1>
                <div class="subtitle">Streamlined workflow for managing change requests</div>
            </div>
            
            <!-- Content -->
            <div class="change-request-content">
                <!-- Progress Bar -->
                <div class="progress-section">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 45%"></div>
                    </div>
                    <div class="progress-text">45% Complete</div>
                </div>
                
                <!-- Statistics Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" data-target="15">15</div>
                        <div class="stat-label">Total Requests</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" data-target="8">8</div>
                        <div class="stat-label">Pending</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" data-target="5">5</div>
                        <div class="stat-label">Approved</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" data-target="2">2</div>
                        <div class="stat-label">Completed</div>
                    </div>
                </div>
                
                <!-- Form -->
                <form class="change-request-form">
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="name">Request Title *</label>
                                <input type="text" id="name" name="name" class="form-control" placeholder="Enter request title" value="Email System Upgrade" required>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="project_name">Project Name</label>
                                <input type="text" id="project_name" name="project_name" class="form-control" placeholder="Enter project name" value="IT Infrastructure Modernization">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="change_number">Change Number</label>
                                <input type="text" id="change_number" name="change_number" class="form-control" placeholder="e.g., CR-0001" value="CR-0001">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="department">Department</label>
                                <input type="text" id="department" name="department" class="form-control" placeholder="Enter department" value="IT Department">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="request_type">Request Type</label>
                                <select id="request_type" name="request_type" class="form-control">
                                    <option value="">Select type</option>
                                    <option value="system" selected>System Change</option>
                                    <option value="process">Process Change</option>
                                    <option value="policy">Policy Change</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="priority">Priority</label>
                                <select id="priority" name="priority" class="form-control">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high" selected>High</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="expected_completion">Expected Completion</label>
                                <input type="date" id="expected_completion" name="expected_completion" class="form-control" value="2025-08-15">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="requester">Requester</label>
                                <input type="text" id="requester" name="requester" class="form-control" value="John Doe" readonly>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Problem Statement -->
                    <div class="form-section">
                        <h3>Problem Statement</h3>
                        <div class="form-group">
                            <label for="problem_statement">Describe the Problem *</label>
                            <textarea id="problem_statement" name="problem_statement" class="form-control" rows="4" placeholder="Describe the issue, gap, or opportunity that triggered this request">The current email system is outdated and poses significant security risks, with recent audits identifying multiple vulnerabilities that need immediate attention.</textarea>
                        </div>
                    </div>
                    
                    <!-- Change Description -->
                    <div class="form-section">
                        <h3>Change Description</h3>
                        <div class="form-group">
                            <label for="change_description">Describe the Change</label>
                            <textarea id="change_description" name="change_description" class="form-control" rows="6" placeholder="Describe the change being requested with detailed specifications">Implement a new email system with enhanced security features, improved performance, and better user interface. The new system will include migration from Exchange 2013 to Exchange 2019, implementation of advanced security protocols, integration with existing Active Directory, mobile device management capabilities, and enhanced backup and recovery systems.</textarea>
                        </div>
                    </div>
                    
                    <!-- Acceptance Criteria -->
                    <div class="form-section">
                        <h3>Acceptance Criteria</h3>
                        <div class="form-group">
                            <label for="acceptance_criteria">List Acceptance Criteria</label>
                            <textarea id="acceptance_criteria" name="acceptance_criteria" class="form-control" rows="4" placeholder="List the acceptance criteria for this change">1. All users can access email without data loss
2. Security vulnerabilities are eliminated
3. System performance is improved by 40%
4. Mobile access is enabled for all users
5. Backup and recovery procedures are tested and functional</textarea>
                        </div>
                    </div>
                    
                    <!-- Reason and Benefits -->
                    <div class="form-section">
                        <h3>Reason and Benefits</h3>
                        <div class="form-group">
                            <label for="reason_for_change">Reason for Change</label>
                            <textarea id="reason_for_change" name="reason_for_change" class="form-control" rows="3" placeholder="Explain why the change is necessary">Compliance with new security regulations and elimination of identified vulnerabilities in the current system.</textarea>
                        </div>
                        <div class="form-group">
                            <label for="benefits_of_change">Benefits of Change</label>
                            <textarea id="benefits_of_change" name="benefits_of_change" class="form-control" rows="3" placeholder="Describe the benefits that will result from this change">Improved security posture, better user experience, reduced maintenance costs, and compliance with industry standards.</textarea>
                        </div>
                    </div>
                    
                    <!-- Schedule and Cost -->
                    <div class="form-section">
                        <h3>Schedule and Cost</h3>
                        <div class="form-group">
                            <label for="delivery_timeline">Delivery Timeline</label>
                            <textarea id="delivery_timeline" name="delivery_timeline" class="form-control" rows="3" placeholder="Provide the delivery timeline">Phase 1: Planning and Design (2 weeks)
Phase 2: Development and Testing (4 weeks)
Phase 3: Migration and Go-Live (1 week)
Phase 4: Post-Implementation Support (2 weeks)</textarea>
                        </div>
                        <div class="form-group">
                            <label for="cost_estimation">Cost Estimation</label>
                            <textarea id="cost_estimation" name="cost_estimation" class="form-control" rows="3" placeholder="Provide cost estimation for this change">Hardware: $50,000
Software Licenses: $25,000
Implementation Services: $30,000
Training: $5,000
Total: $110,000</textarea>
                        </div>
                    </div>
                    
                    <!-- Assumptions and Payment -->
                    <div class="form-section">
                        <h3>Assumptions and Payment</h3>
                        <div class="form-group">
                            <label for="assumptions">Key Assumptions</label>
                            <textarea id="assumptions" name="assumptions" class="form-control" rows="3" placeholder="List the key assumptions">1. Current Active Directory structure remains unchanged
2. All users have compatible devices
3. Internet connectivity is stable during migration
4. Vendor support is available during implementation</textarea>
                        </div>
                        <div class="form-group">
                            <label for="payment_milestones">Payment Milestones</label>
                            <textarea id="payment_milestones" name="payment_milestones" class="form-control" rows="3" placeholder="Define payment milestones">30% upon project initiation
40% upon completion of Phase 2
30% upon successful go-live</textarea>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="form-section">
                        <h3>Actions</h3>
                        <div class="button-group">
                            <button type="button" class="btn-modern btn-primary-modern" data-action="submit">
                                <i class="fa fa-paper-plane"></i> Submit Request
                            </button>
                            <button type="button" class="btn-modern btn-success-modern" data-action="approve">
                                <i class="fa fa-check"></i> Approve
                            </button>
                            <button type="button" class="btn-modern btn-warning-modern" data-action="reject">
                                <i class="fa fa-times"></i> Reject
                            </button>
                            <button type="button" class="btn-modern btn-info-modern" data-action="complete">
                                <i class="fa fa-flag-checkered"></i> Complete
                            </button>
                            <button type="button" class="btn-modern btn-primary-modern" data-action="export">
                                <i class="fa fa-download"></i> Export to Word
                            </button>
                        </div>
                    </div>
                    
                    <!-- Status Display -->
                    <div class="form-section">
                        <h3>Current Status</h3>
                        <div class="status-display">
                            <span class="status-badge status-submitted" data-status="submitted">Submitted</span>
                            <span class="priority-badge priority-high" data-priority="high">High Priority</span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Demo JavaScript functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Progress bar animation
            const progressFill = document.querySelector('.progress-fill');
            const progressText = document.querySelector('.progress-text');
            
            // Simulate progress updates
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress > 45) progress = 45;
                progressFill.style.width = progress + '%';
                progressText.textContent = Math.round(progress) + '% Complete';
                if (progress >= 45) clearInterval(interval);
            }, 500);
            
            // Button click animations
            document.querySelectorAll('.btn-modern').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const action = this.getAttribute('data-action');
                    
                    // Add loading spinner
                    this.innerHTML += '<span class="loading-spinner"></span>';
                    this.disabled = true;
                    
                    // Simulate action
                    setTimeout(() => {
                        this.innerHTML = this.innerHTML.replace('<span class="loading-spinner"></span>', '');
                        this.disabled = false;
                        
                        // Show notification
                        showNotification(`${action.charAt(0).toUpperCase() + action.slice(1)} action completed successfully!`, 'success');
                    }, 1500);
                });
            });
            
            // Status badge click
            document.querySelectorAll('.status-badge').forEach(badge => {
                badge.addEventListener('click', function() {
                    const status = this.getAttribute('data-status');
                    const statusInfo = {
                        'draft': 'Request is in draft mode and can be edited',
                        'submitted': 'Request has been submitted for review',
                        'approved': 'Request has been approved and is ready for implementation',
                        'rejected': 'Request has been rejected and needs revision',
                        'completed': 'Request has been completed successfully'
                    };
                    showNotification(statusInfo[status] || 'Status information not available', 'info');
                });
            });
            
            // Priority badge click
            document.querySelectorAll('.priority-badge').forEach(badge => {
                badge.addEventListener('click', function() {
                    const priority = this.getAttribute('data-priority');
                    const priorityInfo = {
                        'low': 'Low priority - can be addressed when resources are available',
                        'medium': 'Medium priority - should be addressed within normal timeframe',
                        'high': 'High priority - requires immediate attention',
                        'urgent': 'Urgent priority - critical issue requiring immediate resolution'
                    };
                    showNotification(priorityInfo[priority] || 'Priority information not available', 'info');
                });
            });
            
            // Form field validation
            document.querySelectorAll('.form-control').forEach(field => {
                field.addEventListener('input', function() {
                    validateField(this);
                });
                
                field.addEventListener('blur', function() {
                    // Simulate auto-save
                    if (this.value.trim()) {
                        showAutoSaveIndicator();
                        setTimeout(() => {
                            hideAutoSaveIndicator();
                        }, 1000);
                    }
                });
            });
            
            function validateField(field) {
                const value = field.value;
                const fieldName = field.name;
                
                // Remove existing validation classes
                field.classList.remove('is-valid', 'is-invalid');
                const existingMessage = field.parentNode.querySelector('.validation-message');
                if (existingMessage) existingMessage.remove();
                
                let isValid = true;
                let errorMessage = '';
                
                // Field-specific validation
                switch(fieldName) {
                    case 'name':
                        if (!value || value.length < 5) {
                            isValid = false;
                            errorMessage = 'Request title must be at least 5 characters long';
                        }
                        break;
                    case 'problem_statement':
                        if (!value || value.length < 10) {
                            isValid = false;
                            errorMessage = 'Problem statement must be at least 10 characters long';
                        }
                        break;
                }
                
                // Apply validation styling
                if (isValid) {
                    field.classList.add('is-valid');
                } else {
                    field.classList.add('is-invalid');
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'validation-message text-danger';
                    messageDiv.textContent = errorMessage;
                    field.parentNode.appendChild(messageDiv);
                }
            }
            
            function showNotification(message, type) {
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
            
            function showAutoSaveIndicator() {
                const indicator = document.createElement('div');
                indicator.className = 'auto-save-indicator';
                indicator.textContent = 'Auto-saving...';
                document.body.appendChild(indicator);
            }
            
            function hideAutoSaveIndicator() {
                const indicator = document.querySelector('.auto-save-indicator');
                if (indicator) indicator.remove();
            }
        });
    </script>
</body>
</html>
